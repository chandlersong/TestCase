plugins {
    id 'java'
}

allprojects {
    group 'me.chandlersong'
    version '1.0-SNAPSHOT'
}

jar.enabled = false

subprojects {
    group = 'me.chandlersong.flink'
    apply plugin: 'java-library'

    ext {
        javaVersion = 1.8
        flinkVersion = '1.11.0'
        scalaBinaryVersion = '2.12'
        slf4jVersion = '1.7.15'
        log4jVersion = '2.12.1'
        shadowVersion = '6.0.0'
    }

    sourceCompatibility = javaVersion
    targetCompatibility = javaVersion

    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }


    dependencies {
        api "com.google.guava:guava:$guavaVersion"
        testCompile group: 'junit', name: 'junit', version: '4.12'
    }

    task wrapper(type: Wrapper) {
        gradleVersion >=k '6.5.0'
    }


    configurations {
        flinkShadowJar // dependencies which go into the shadowJar

        // always exclude these (also from transitive dependencies) since they are provided by Flink
        flinkShadowJar.exclude group: 'org.apache.flink', module: 'force-shading'
        flinkShadowJar.exclude group: 'com.google.code.findbugs', module: 'jsr305'
        flinkShadowJar.exclude group: 'org.slf4j'
        flinkShadowJar.exclude group: 'org.apache.logging.log4j'
    }

    repositories {
        mavenLocal()
        maven { url "http://maven.aliyun.com/nexus/content/groups/public/" }
        mavenCentral()
        maven { url "https://repository.apache.org/content/repositories/snapshots/" }
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }


}
